{"version":3,"file":"js/64.3f6385bb.js","mappings":"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","sources":["webpack://pro/./src/views/View/index.vue","webpack://pro/./src/views/View/addview.vue","webpack://pro/src/views/View/addview.vue","webpack://pro/./src/views/View/addview.vue?e630","webpack://pro/./src/views/View/addview.vue?b786","webpack://pro/./src/api/views.js","webpack://pro/src/views/View/index.vue","webpack://pro/./src/views/View/index.vue?1d67","webpack://pro/./src/views/View/index.vue?4d85","webpack://pro/./src/api/chapter.js","webpack://pro/./src/api/subject.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.add_state)?_c('addview',{attrs:{\"chapter_id\":_vm.chapter_id},on:{\"add_video\":_vm.add_video,\"upload\":_vm.upload}}):_vm._e(),_c('el-button',{on:{\"click\":_vm.add_video}},[_vm._v(\"新增视频\")]),_c('div',{staticClass:\"find_video\"},[_c('el-select',{attrs:{\"placeholder\":_vm.value_subject},on:{\"change\":_vm.change},model:{value:(_vm.value_subject),callback:function ($$v) {_vm.value_subject=$$v},expression:\"value_subject\"}},_vm._l((_vm.subject),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.name}})}),1),_c('el-select',{attrs:{\"placeholder\":_vm.value_chapter},on:{\"change\":_vm.change_chapter},model:{value:(_vm.value_chapter),callback:function ($$v) {_vm.value_chapter=$$v},expression:\"value_chapter\"}},_vm._l((_vm.chapter),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.name}})}),1)],1),_vm._l((_vm.video_src),function(item,index){return _c('div',{key:item.id,staticClass:\"video\"},[_c('video',{attrs:{\"src\":item,\"controls\":\"\",\"muted\":\"\",\"height\":\"300px\",\"width\":\"70%\"},domProps:{\"muted\":true}}),_c('div',{staticClass:\"btn\"},[_c('el-button',{on:{\"click\":function($event){return _vm.upload_video(index)}}},[_vm._v(\"更新\")]),_c('el-button',{on:{\"click\":function($event){return _vm.delete_video(index)}}},[_vm._v(\"删除\")])],1)])})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"mask\"},[_c('div',{staticClass:\"form\"},[_c('el-upload',{ref:\"upload\",staticClass:\"upload-demo\",attrs:{\"action\":\"https://www.chengzier.cn:8000/api/chapter_video\",\"limit\":1,\"name\":\"video\",\"headers\":_vm.headers,\"data\":_vm.video_data,\"on-success\":_vm.res,\"on-change\":_vm.change,\"auto-upload\":false}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"选择视频\")])],1),_c('el-form',{attrs:{\"label-position\":_vm.labelPosition,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"名称\"}},[_c('el-input',{model:{value:(_vm.video_data.name),callback:function ($$v) {_vm.$set(_vm.video_data, \"name\", $$v)},expression:\"video_data.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"章节名\"}},[_c('el-input',{model:{value:(_vm.video_data.chapter_id),callback:function ($$v) {_vm.$set(_vm.video_data, \"chapter_id\", $$v)},expression:\"video_data.chapter_id\"}})],1),_c('el-form-item',{attrs:{\"label\":\"是否收费\"}},[_c('el-input',{model:{value:(_vm.video_data.permission),callback:function ($$v) {_vm.$set(_vm.video_data, \"permission\", $$v)},expression:\"video_data.permission\"}})],1)],1),_c('div',{staticClass:\"btn\"},[_c('el-button',{on:{\"click\":_vm.upload}},[_vm._v(\"添加\")]),_c('el-button',{on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")])],1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"mask\">\r\n    <div class=\"form\">\r\n      <el-upload\r\n      class=\"upload-demo\"\r\n      action=\"https://www.chengzier.cn:8000/api/chapter_video\"\r\n      :limit=\"1\"\r\n      name=\"video\"\r\n      :headers=\"headers\"\r\n      ref=\"upload\"\r\n      :data=\"video_data\"\r\n      :on-success=\"res\"\r\n      :on-change=\"change\"\r\n      :auto-upload=\"false\"\r\n      >\r\n        <el-button size=\"small\" type=\"primary\">选择视频</el-button>\r\n      </el-upload>\r\n      <el-form :label-position=\"labelPosition\" label-width=\"80px\">\r\n        <el-form-item label=\"名称\">\r\n          <el-input v-model=\"video_data.name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"章节名\">\r\n          <el-input v-model=\"video_data.chapter_id\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"是否收费\">\r\n          <el-input v-model=\"video_data.permission\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div class=\"btn\">\r\n        <el-button @click=\"upload\">添加</el-button>\r\n        <el-button @click=\"cancel\">取消</el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    data(){\r\n      return{\r\n        labelPosition: \"left\",\r\n        headers: {\r\n          Authorization: \"\"\r\n        },\r\n        video_data:{\r\n          name:'',\r\n          chapter_id:'',\r\n          permission:''\r\n        }\r\n      }\r\n    },\r\n    props:['chapter_id'],\r\n    created(){\r\n      this.video_data.chapter_id = this.chapter_id\r\n    },\r\n    methods:{\r\n      upload(){\r\n        this.headers['Authorization'] = 'Bearer ' + this.$store.state.token\r\n        this.$refs.upload.submit()\r\n      },\r\n      res(e){\r\n        this.$emit('upload')\r\n      },\r\n      change(file,fileList){},\r\n      cancel(){\r\n        this.$emit('add_video')\r\n      }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n.mask {\r\n  position: fixed;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  background-color: rgba(0, 0, 0, 0.7);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 999;\r\n}\r\n\r\n.form {\r\n  background-color: #fff;\r\n  border-radius: 10px;\r\n  width: 500px;\r\n  padding: 30px;\r\n}\r\n\r\n.btn {\r\n  display: flex;\r\n  justify-content: space-around;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./addview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./addview.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./addview.vue?vue&type=template&id=0ca0a80a&\"\nimport script from \"./addview.vue?vue&type=script&lang=js&\"\nexport * from \"./addview.vue?vue&type=script&lang=js&\"\nimport style0 from \"./addview.vue?vue&type=style&index=0&id=0ca0a80a&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import request from '@/axios'\r\n\r\nexport function getVideo(pk){\r\n    return request({\r\n        url:'chapter_video?pk=' + pk,\r\n        data:{\r\n          pk:pk\r\n        },\r\n        headers:{\r\n          \"Content-Type\":'application/x-www-form-urlencoded'\r\n        }\r\n    })\r\n}\r\n\r\nexport function addVideo(video,name,chapter_id,video_permission){\r\n  const formdata = new FormData()\r\n  formdata.append('video',video)\r\n  formdata.append('name',name)\r\n  formdata.append('chapter_id',chapter_id)\r\n  formdata.append('video_permission',video_permission)\r\n  return request({\r\n    method:'POST',\r\n    url:'chapter_video',\r\n    data:formdata\r\n  })\r\n}\r\n\r\nexport function uploadVideo(pk,name,string){\r\n  return request({\r\n    url:'chapter_video',\r\n    method:'PUT',\r\n    data:{\r\n      pk:pk,\r\n      name:name,\r\n      chapter_id:chapter_id\r\n    },\r\n    headers:{\r\n      \"Content-Type\":'application/x-www-form-urlencoded'\r\n    }\r\n  })\r\n}\r\n\r\nexport function delVideo(pk){\r\n  return request({\r\n    url:'chapter_video',\r\n    method:'DELETE',\r\n    data:{\r\n      pk:pk\r\n    },\r\n    headers:{\r\n      \"Content-Type\":'application/x-www-form-urlencoded'\r\n    }\r\n  })\r\n}","<template>\r\n  <div>\r\n    <addview v-if=\"add_state\" @add_video=\"add_video\" @upload=\"upload\" :chapter_id=\"chapter_id\"></addview>\r\n    <el-button @click=\"add_video\">新增视频</el-button>\r\n    <div class=\"find_video\">\r\n      <el-select v-model=\"value_subject\" :placeholder=\"value_subject\" @change=\"change\">\r\n        <el-option v-for=\"item in subject\" :key=\"item.id\" :label=\"item.name\" :value=\"item.name\"></el-option>\r\n      </el-select>\r\n      <el-select v-model=\"value_chapter\" :placeholder=\"value_chapter\" @change=\"change_chapter\">\r\n        <el-option v-for=\"item in chapter\" :key=\"item.id\" :label=\"item.name\" :value=\"item.name\"></el-option>\r\n      </el-select>\r\n    </div>\r\n    <div class=\"video\" v-for=\"(item,index) in video_src\" :key=\"item.id\">\r\n      <video :src=\"item\" controls muted height=\"300px\" width=\"70%\"></video>\r\n      <div class=\"btn\">\r\n        <el-button @click=\"upload_video(index)\">更新</el-button>\r\n        <el-button @click=\"delete_video(index)\">删除</el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport addview from './addview.vue'\r\nimport { getClass } from '@/api/subject'\r\nimport { getChapter } from '@/api/chapter'\r\nimport { getVideo, delVideo } from '@/api/views'\r\nexport default {\r\n  data(){\r\n    return {\r\n      add_state:false,\r\n      subject:[],\r\n      chapter:[],\r\n      value_subject:'',\r\n      value_chapter:'',\r\n      video:[],\r\n      video_src:[],\r\n      chapter_id:''\r\n    }\r\n  },\r\n  components:{\r\n    addview\r\n  },\r\n  async created(){\r\n    if(!this.$store.state.subject.state && !this.$store.state.chapter.state){\r\n      try{\r\n        const res = await getClass()\r\n        this.subject = res.data.data\r\n        const result = await getChapter(this.subject[0].id)\r\n        this.chapter = result.data.data\r\n      } catch(e){\r\n        console.log(e);\r\n      }\r\n    } else{\r\n      this.subject = this.$store.state.subject.list\r\n      this.chapter = this.$store.state.chapter.chapterList\r\n    }\r\n    this.value_subject = this.subject[0].name\r\n    this.value_chapter = this.chapter[0].name\r\n    this.chapter_id = this.chapter[0].id\r\n    this.get_video()\r\n  },\r\n  methods:{\r\n    async add_video(){\r\n      this.add_state = !this.add_state\r\n    },\r\n    upload(){\r\n      this.add_video()\r\n      this.get_video(this.chapter_id)\r\n    },\r\n    async get_video(id = this.chapter[0].id){\r\n      this.video_src = []\r\n      if(this.chapter.length != 0){\r\n        const res = await getVideo(id)\r\n        this.video = res.data.data;\r\n        this.video.forEach(item => {\r\n          let temp = item.mp4_url.split('.mp4')\r\n          this.video_src.push(\r\n            `https://www.chengzier.cn:9000/api/videoplay?path=${temp[0]}`\r\n          )\r\n        })\r\n      }\r\n    },\r\n    async change(value){\r\n      let select_subject = this.subject.filter(item =>{\r\n        if(item.name === value){\r\n          return true\r\n        }\r\n      })\r\n      const res = await getChapter(select_subject[0].id)\r\n      this.chapter = res.data.data\r\n      this.chapter_id = this.chapter[0].id\r\n      this.value_chapter = this.chapter[0].name\r\n      this.get_video(this.chapter[0].id)\r\n    },\r\n    async change_chapter(value){\r\n      let select_chapter = this.chapter.filter(item =>{\r\n        if(item.name === value){\r\n          return true\r\n        }\r\n      })\r\n      this.chapter_id = select_chapter[0].id\r\n      this.get_video(select_chapter[0].id)\r\n    },\r\n    async delete_video(index){\r\n      const res = await delVideo(this.video[index].id)\r\n      console.log(res);\r\n      this.get_video(this.chapter_id)\r\n    },\r\n    async upload_video(index){\r\n      this.delete_video(index)\r\n      this.add_video(this.chapter_id)\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.el-dropdown-link {\r\n  cursor: pointer;\r\n  color: #409eff;\r\n}\r\n.el-icon-arrow-down {\r\n  font-size: 12px;\r\n}\r\n.find_video {\r\n  margin-top: 20px;\r\n  display: flex;\r\n}\r\n.dropdown_menu {\r\n  height: 300px;\r\n  overflow-y: scroll;\r\n}\r\n\r\n.video {\r\n  margin-top: 20px;\r\n  display: flex;\r\n}\r\n.video {\r\n  border: 1px solid black;\r\n  margin-left: 20px;\r\n  position: relative\r\n}\r\n.btn{\r\n  position: absolute;\r\n  top: 50%;\r\n  right: 0;\r\n}\r\n</style>>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=208183db&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=208183db&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"208183db\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/axios'\r\nimport qs from 'qs'\r\n\r\nexport function getChapter(pk){\r\n    return request({\r\n        url:'chapter?pk=' + pk\r\n    })\r\n}\r\n\r\nexport function delChapter(pk){\r\n    return request({\r\n        method:'DELETE',\r\n        url:'chapter',\r\n        data:{\r\n          pk:pk\r\n        },\r\n        headers:{\r\n          \"Content-Type\":'application/x-www-form-urlencoded'\r\n        }\r\n      })\r\n}\r\n\r\nexport function addChapter(pk,chapter_name){\r\n    const formdate = new FormData()\r\n    formdate.append(\"pk\",pk)\r\n    formdate.append(\"chapter_name\",chapter_name)\r\n    return request({\r\n      method:'POST',\r\n      url:'chapter',\r\n      data:formdate,\r\n  })\r\n}\r\n\r\nexport function editChapter(pk,chapter_name){\r\n  console.log(pk);\r\n  return request({\r\n    method:'PUT',\r\n    url:'chapter',\r\n    data:{\r\n      pk:pk,\r\n      chapter_name :chapter_name\r\n    },\r\n    headers:{\r\n      \"Content-Type\":'application/x-www-form-urlencoded'\r\n    }\r\n  })\r\n}","import request from '@/axios'\r\nimport qs from 'qs'\r\n// 获取课程\r\nexport function getClass () {\r\n    return request({\r\n      method:'GET',\r\n      url:'classify',\r\n    })\r\n  }\r\n// 删除课程\r\nexport function delClass (pk) {\r\n  return request({\r\n    method:'DELETE',\r\n    url:'classify',\r\n    data:{\r\n      pk:pk\r\n    },\r\n    headers:{\r\n      \"Content-Type\":'application/x-www-form-urlencoded'\r\n    }\r\n  })\r\n}\r\n\r\n// 新增课程\r\nexport function addClass(name) {\r\n  const formdate = new FormData()\r\n  formdate.append(\"name\",name)\r\n  return request({\r\n    method:'POST',\r\n    url:'classify',\r\n    data:formdate,\r\n  })\r\n}\r\n\r\n// 编辑课程\r\nexport function editClass(obj){\r\n  return request({\r\n    method:'PUT',\r\n    url:'classify',\r\n    data:qs.stringify(obj),\r\n    headers:{\r\n      \"Content-Type\":'application/x-www-form-urlencoded'\r\n    }\r\n  })\r\n}"],"names":["render","_vm","this","_c","_self","add_state","attrs","chapter_id","on","add_video","upload","_e","_v","staticClass","value_subject","change","model","value","callback","$$v","expression","_l","subject","item","key","id","name","value_chapter","change_chapter","chapter","video_src","index","domProps","$event","upload_video","delete_video","staticRenderFns","ref","headers","video_data","res","labelPosition","$set","permission","cancel","data","Authorization","props","created","methods","$store","state","token","$refs","submit","e","$emit","file","fileList","component","getVideo","pk","request","url","delVideo","method","video","components","addview","list","chapterList","getClass","result","getChapter","console","log","get_video","length","forEach","temp","mp4_url","split","push","select_subject","filter","select_chapter","delChapter","addChapter","chapter_name","formdate","FormData","append","editChapter","delClass","addClass","editClass","obj","qs"],"sourceRoot":""}